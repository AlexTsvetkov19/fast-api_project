<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§—Ä–æ–Ω—Ç –¥–ª—è API –∫–Ω–∏–≥</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        button { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #218838; }
        #result { margin-top: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: #f8f9fa; }
        ul { list-style: none; padding: 0; }
        li { margin: 5px 0; padding: 8px; background: white; border-radius: 3px; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <h1>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ üìö</h1>
    <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–Ω–∏–≥–∏ —Å <a href="http://127.0.0.1:8000/docs#/">API</a></p>

    <button onclick="loadBooks()">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</button>
    <div id="result"></div>

    <script>
        async function loadBooks() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>–ó–∞–≥—Ä—É–∂–∞–µ–º...</p>';

            try {
                const response = await fetch('http://127.0.0.1:8000/books');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);

                const books = await response.json();
                if (books && books.length > 0) {
                    resultDiv.innerHTML = `<h3>–ù–∞–π–¥–µ–Ω–æ –∫–Ω–∏–≥: ${books.length}</h3><ul>${books.map(book =>
                        `<li><strong>${book.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</strong> - ${book.author || '–ê–≤—Ç–æ—Ä –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'}</li>`
                    ).join('')}</ul>`;
                } else {
                    resultDiv.innerHTML = '<p>–ö–Ω–∏–≥ –ø–æ–∫–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ üòî</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<p style="color: red;">–û—à–∏–±–∫–∞: ${error.message}. –ü—Ä–æ–≤–µ—Ä—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ –±—ç–∫–µ–Ω–¥!</p>`;
            }
        }
    </script>
</body>
</html>